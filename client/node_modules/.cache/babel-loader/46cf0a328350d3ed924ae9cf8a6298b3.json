{"ast":null,"code":"import _objectSpread from\"C:/Users/micha/OneDrive/Desktop/projects/mernProject/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/micha/OneDrive/Desktop/projects/mernProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{useEffect,useState}from'react';import{useHistory,useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InvoicePage=function InvoicePage(){var history=useHistory();var _useParams=useParams(),standId=_useParams.standId,transactionId=_useParams.transactionId;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),transaction=_useState2[0],setTransaction=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),stand=_useState4[0],setStand=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),tip=_useState6[0],setTip=_useState6[1];useEffect(function(){axios.get(\"http://localhost:8000/api/stands/\".concat(standId)).then(function(res){setStand(res.data);console.log(res.data,stand,\"axios response for the stand\");console.log(stand,'stand after setting stand to axios response');}).catch(function(err){return console.log(err);});axios.get(\"http://localhost:8000/api/transactions/\".concat(transactionId)).then(function(res){console.log(res);setTransaction(res.data);}).catch(function(err){return console.log(err);});console.log(transaction,\"this is the transaction\");},[]);var toReceipt=function toReceipt(e){e.preventDefault();var updatedTransaction=_objectSpread(_objectSpread({},transaction),{},{tip:parseInt(tip),price:4*transaction.lemonades});axios.put(\"http://localhost:8000/api/transactions/\".concat(transactionId),updatedTransaction).then(function(res){console.log(res.data);setTransaction(updatedTransaction);}).catch(function(err){return console.log(err);});var updatedStand=_objectSpread(_objectSpread({},stand),{},{total_sales:stand.total_sales+updatedTransaction.price,total_cups:stand.total_cups+updatedTransaction.lemonades,total_tips:stand.total_tips+parseInt(tip)});console.log(stand,'after put request updating stand');axios.put(\"http://localhost:8000/api/stands/\".concat(standId),updatedStand).then(function(res){setStand(updatedStand);console.log(updatedStand);}).catch(function(err){return console.log(err);});history.push(\"/receipt/\".concat(standId,\"/\").concat(transactionId));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:JSON.stringify(tip)}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",style:{margin:\"25px\",padding:\"15px\",border:\"solid black 2px\"},onSubmit:function onSubmit(e){return toReceipt(e);},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Invoice\"}),/*#__PURE__*/_jsxs(\"p\",{children:[transaction.lemonades,\" Lemonades @ $4/each\"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Price: $\",transaction.lemonades*4]}),\"Add Gratuity: \",/*#__PURE__*/_jsx(\"input\",{type:\"number\",style:{marginBottom:\"15px\"},onChange:function onChange(e){return setTip(e.target.value);},value:tip}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Payment Received\"})]})]});};export default InvoicePage;","map":{"version":3,"sources":["C:/Users/micha/OneDrive/Desktop/projects/mernProject/client/src/components/InvoicePage.jsx"],"names":["axios","useEffect","useState","useHistory","useParams","InvoicePage","history","standId","transactionId","transaction","setTransaction","stand","setStand","tip","setTip","get","then","res","data","console","log","catch","err","toReceipt","e","preventDefault","updatedTransaction","parseInt","price","lemonades","put","updatedStand","total_sales","total_cups","total_tips","push","JSON","stringify","margin","padding","border","marginBottom","target","value"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport {useHistory, useParams} from 'react-router-dom';\r\n\r\nconst InvoicePage = () => {\r\n    const history = useHistory();\r\n    const {standId, transactionId} = useParams();\r\n    const [transaction, setTransaction] = useState({});\r\n    const [stand, setStand] = useState({});\r\n    const [tip, setTip] = useState(0);\r\n    \r\n    useEffect(() => {\r\n        axios.get(`http://localhost:8000/api/stands/${standId}`)\r\n        .then((res)=>{\r\n            setStand(res.data);\r\n            console.log(res.data, stand, \"axios response for the stand\");\r\n            console.log(stand, 'stand after setting stand to axios response')\r\n        })\r\n        .catch((err)=>console.log(err))\r\n        \r\n        axios.get(`http://localhost:8000/api/transactions/${transactionId}`)\r\n        .then((res)=> {\r\n            console.log(res);\r\n            setTransaction(res.data)\r\n        })\r\n        .catch((err)=>console.log(err))\r\n\r\n        console.log(transaction, \"this is the transaction\");\r\n\r\n    }, []) \r\n    \r\n    const toReceipt = (e) => {\r\n        e.preventDefault();\r\n\r\n        const updatedTransaction = {\r\n            ...transaction,\r\n            tip: parseInt(tip),\r\n            price: 4*transaction.lemonades\r\n        }\r\n\r\n        axios.put(`http://localhost:8000/api/transactions/${transactionId}`, updatedTransaction)\r\n        .then((res)=> {\r\n            console.log(res.data)\r\n            setTransaction(updatedTransaction)\r\n            })\r\n        .catch((err)=>console.log(err))\r\n\r\n        const updatedStand = {\r\n            ...stand,\r\n            total_sales: stand.total_sales + updatedTransaction.price,\r\n            total_cups: stand.total_cups + updatedTransaction.lemonades,\r\n            total_tips: stand.total_tips + parseInt(tip)\r\n        }\r\n\r\n        console.log(stand, 'after put request updating stand')\r\n\r\n        axios.put(`http://localhost:8000/api/stands/${standId}`, updatedStand)\r\n        .then((res)=>{\r\n            setStand(updatedStand);\r\n            console.log(updatedStand);\r\n        })\r\n        .catch((err)=>console.log(err))\r\n\r\n        history.push(`/receipt/${standId}/${transactionId}`)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <p>{JSON.stringify(tip)}</p>\r\n            <form className=\"form\" style={{margin:\"25px\", padding:\"15px\", border:\"solid black 2px\"}} onSubmit={(e)=>toReceipt(e)}>\r\n                <h2>Invoice</h2>\r\n                <p>{transaction.lemonades} Lemonades @ $4/each</p>\r\n                <hr />\r\n                <p>Total Price: ${transaction.lemonades * 4}</p>\r\n                Add Gratuity: <input type=\"number\" style={{marginBottom:\"15px\"}} onChange={(e)=>setTip(e.target.value)} value={tip}/><br />\r\n                <button className=\"btn btn-primary\">Payment Received</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InvoicePage;"]},"metadata":{},"sourceType":"module"}